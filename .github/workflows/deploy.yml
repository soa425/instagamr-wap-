name: Deploy to S3 and Invalidate CloudFront

on: 
  push:
    branches: 
      - main

jobs: 
  deploy: 
    runs-on: ubuntu-latest
    steps:
      - name: github Repository 파일불러오기
        uses: actions/checkout@v4
    
      - name: 의존성 설치 
         run: npm i

       - name: 빌드하기 
          run: npm run boild 
      
         name: Aws Resource 에 접근할 수 있게 AWS 인증 설정  
         uses: Aws-actions/configure-aws-credentials@v4 
         with: 
            aws-region: ap-northeast-2
            aws-access-key-id: ${{ secrets.AWS-access_KEY-ID}}
            aws-secrst-access-key: ${{ secrats.AWS_SECRET_ACCESS_kEY}}

       - name: s3 기존 파일을 전체 삭제 
          run: | 
             aws s3 rm --recursive s3://